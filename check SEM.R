library(lavaan)
m <- matrix(NA, 12, 12)
m[lower.tri(m,diag=TRUE)] <- c(1, 0.49, 0.49, 0.49, 0.49, 0.49,0, 0, 0, 0, 0, 0,
                               1, 0.49, 0.49, 0.49, 0.49,  0,  0, 0, 0, 0, 0,
                               1, 0.49, 0.49, 0.49,  0,  0, 0, 0, 0, 0,
                               1, 0.49, 0.49,  0,  0, 0, 0, 0, 0,
                               1, 0.49,  0,  0, 0, 0, 0, 0,
                               1, 0,  0, 0, 0, 0, 0,
                               1, 0.44898, 0.44898,  0.44898,0.57246,  0.57246,
                               1, 0.44898,  0.44898,0.57246,  0.57246,
                               1,  0.44898,0.57246,  0.57246,
                               1,  0.57246,  0.57246,
                               1.02929, 0.72990 ,
                               1.02929)
makeSymm <- function(m) {
  m[upper.tri(m)] <- t(m)[upper.tri(m)]
  return(m)
}
m<-makeSymm(m)
colnames(m) <- paste("x", 1:12, sep="") 
m

fitted.mod <- '    
f1 =~ .7*x1 + .7*x2 + .7*x3 +.7*x4 + .7*x5 + .7*x6 
f2 =~ .7*x7 + .7*x8 + .7*x9 +.7*x10 + .7*x11 + .7*x12 
f1 ~~ 0*f2
f1 ~~ 1*f1
f2 ~~ 1*f2    
x1 ~~ .51*x1
x2 ~~ .51*x2
x3 ~~ .51*x3
x4 ~~ .51*x4
x5 ~~ .51*x5
x6 ~~ .51*x6
x7 ~~ .51*x7
x8 ~~  .51*x8
x9 ~~  .51*x9
x10 ~~  .51*x10
x11 ~~  .51*x11
x12 ~~ .51*x12
x11 ~~ 0.4*x12
'




fit <- cfa(model=fitted.mod, sample.nobs=300, sample.cov=m, mimic="EQS")
lavInspect(fit, "fit")
fit
  